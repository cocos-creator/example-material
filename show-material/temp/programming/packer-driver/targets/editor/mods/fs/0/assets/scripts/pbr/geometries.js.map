{"version":3,"sources":["file:///D:/material-examples/show-material/assets/scripts/pbr/geometries.ts"],"names":["_decorator","Component","Color","Node","utils","primitives","ModelComponent","Material","math","ccclass","Geometries","start","node","removeAllChildren","models","rows","cols","stride","albedo","meshSphere","createMesh","sphere","segments","i","j","parent","setPosition","Math","floor","comp","addComponent","mesh","m","initialize","effectName","setProperty","clamp","material","push"],"mappings":";;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,U,OAAAA,U;AAAYC,MAAAA,c,OAAAA,c;AAAgBC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,I,OAAAA,I;;;;;;;OACpF;AAAEC,QAAAA;AAAF,O,GAAcT,U;;4BAGPU,U,WADZD,OAAO,CAAC,YAAD,C,gBAAR,MACaC,UADb,SACgCT,SADhC,CAC0C;AAE/BU,QAAAA,KAAK,GAAI;AACZ,eAAKC,IAAL,CAAUC,iBAAV;AACA,gBAAMC,MAAM,GAAG,EAAf;AACA,gBAAMC,IAAI,GAAG,CAAb;AAAgB,gBAAMC,IAAI,GAAG,CAAb;AAAgB,gBAAMC,MAAM,GAAG,GAAf;AAChC,gBAAMC,MAAM,GAAG,IAAIhB,KAAJ,CAAU,GAAV,EAAe,CAAf,EAAkB,CAAlB,CAAf;AACA,gBAAMiB,UAAU,GAAGf,KAAK,CAACgB,UAAN,CAAiBf,UAAU,CAACgB,MAAX,CAAkB,CAAlB,EAAqB;AAAEC,YAAAA,QAAQ,EAAE;AAAZ,WAArB,CAAjB,CAAnB;;AACA,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGR,IAApB,EAA0BQ,CAAC,EAA3B,EAA+B;AAC3B,iBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGR,IAApB,EAA0BQ,CAAC,EAA3B,EAA+B;AAC3B,oBAAMZ,IAAI,GAAG,IAAIT,IAAJ,EAAb;AACAS,cAAAA,IAAI,CAACa,MAAL,GAAc,KAAKb,IAAnB;AACAA,cAAAA,IAAI,CAACc,WAAL,CAAiB,CAACF,CAAC,GAAGG,IAAI,CAACC,KAAL,CAAWZ,IAAI,GAAG,CAAlB,CAAL,IAA6BC,MAA9C,EAAsD,CAACM,CAAC,GAAGI,IAAI,CAACC,KAAL,CAAWb,IAAI,GAAG,CAAlB,CAAL,IAA6BE,MAAnF,EAA2F,CAA3F;AACA,oBAAMY,IAAI,GAAGjB,IAAI,CAACkB,YAAL,CAAkBxB,cAAlB,CAAb;AACAuB,cAAAA,IAAI,CAACE,IAAL,GAAYZ,UAAZ;AACA,oBAAMa,CAAC,GAAG,IAAIzB,QAAJ,EAAV;AACAyB,cAAAA,CAAC,CAACC,UAAF,CAAa;AACTC,gBAAAA,UAAU,EAAE;AADH,eAAb;AAGAF,cAAAA,CAAC,CAACG,WAAF,CAAc,WAAd,EAA2B3B,IAAI,CAAC4B,KAAL,CAAWZ,CAAC,GAAGR,IAAf,EAAqB,IAArB,EAA2B,CAA3B,CAA3B;AACAgB,cAAAA,CAAC,CAACG,WAAF,CAAc,UAAd,EAA0BZ,CAAC,GAAGR,IAA9B;AACAiB,cAAAA,CAAC,CAACG,WAAF,CAAc,QAAd,EAAwBjB,MAAxB;AACAW,cAAAA,IAAI,CAACQ,QAAL,GAAgBL,CAAhB;AAAmBlB,cAAAA,MAAM,CAACwB,IAAP,CAAYT,IAAZ;AACtB;AACJ;AACJ;;AAzBqC,O","sourcesContent":["import { _decorator, Component, Color, Node, utils, primitives, ModelComponent, Material, math } from 'cc';\r\nconst { ccclass } = _decorator;\r\n\r\n@ccclass('Geometries')\r\nexport class Geometries extends Component {\r\n\r\n    public start () {\r\n        this.node.removeAllChildren();\r\n        const models = [];\r\n        const rows = 7; const cols = 7; const stride = 2.5;\r\n        const albedo = new Color(128, 0, 0);\r\n        const meshSphere = utils.createMesh(primitives.sphere(1, { segments: 64 }));\r\n        for (let i = 0; i < rows; i++) {\r\n            for (let j = 0; j < cols; j++) {\r\n                const node = new Node();\r\n                node.parent = this.node;\r\n                node.setPosition((j - Math.floor(cols / 2)) * stride, (i - Math.floor(rows / 2)) * stride, 0);\r\n                const comp = node.addComponent(ModelComponent);\r\n                comp.mesh = meshSphere;\r\n                const m = new Material();\r\n                m.initialize({\r\n                    effectName: 'builtin-standard',\r\n                });\r\n                m.setProperty('roughness', math.clamp(j / cols, 0.05, 1));\r\n                m.setProperty('metallic', i / rows);\r\n                m.setProperty('albedo', albedo);\r\n                comp.material = m; models.push(comp);\r\n            }\r\n        }\r\n    }\r\n}\r\n"]}